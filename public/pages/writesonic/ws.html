<!DOCTYPE html>
<html>
  <head>
    <title>WriteSonic Article Generator</title>
  </head>
  <body>
    <h1>WriteSonic Article Generator</h1>
    <form id="article-form">
      <label for="title">Title:</label>
      <input type="text" id="title" name="title" required>
      <br>
      <label for="intro">Intro:</label>
      <textarea id="intro" name="intro" rows="4" cols="50" required></textarea>
      <br>
      <label for="sections">Sections:</label>
      <textarea id="sections" name="sections" rows="10" cols="50" required></textarea>
      <br>
      <input type="submit" value="Generate Article">
    </form>

    <div id="article"></div>

    <script>
      const form = document.querySelector('#article-form');
      const articleDiv = document.querySelector('#article');

      form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const formData = new FormData(form);

        const sections = formData.get('sections').split('\n');
        const title = formData.get('title');
        const intro = formData.get('intro');

        const response = await fetch('/generate-article', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            sections,
            title,
            intro
          })
        });

        const { article } = await response.json();
        articleDiv.innerHTML = article;
      });
    </script>
  </body>
</html>
